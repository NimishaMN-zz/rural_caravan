<%= form_with(model: expense, local: true) do |f| %>
  <div class="row">
    <div class="col-lg-12">
      <section class="panel">
        <div class="panel-body">
          <div class="form-group">

            <div class="field">
              <%= f.label :type %><br>
              <%= select_tag :expense_status, options_for_select(Expense.statuses), {:prompt => 'Select' , :class => 'form-control bg-focus', :style=>"width:200px;"} %>
            </div>
            <% Rails.logger.debug "stakeholder---------------- #{@stakeholder.inspect}"%>
            
            <div class="field" id="stakeholder">
              <%= f.label :customer_name %><br>
              <%= f.collection_select :customer_id, @stakeholder.order(:name), :id,:name, :class => 'form-control bg-focus', :style=>"width:200px;" %>
              <%= f.grouped_collection_select(:customer_id, @stakeholder, :name, {include_blank: true}, {class: 'form-control bg-focus'}, style: 'width:200px') %>
            </div>
            

            <div class="field">
              <%= f.label :date %><br>
              <%= f.date_select :expense_date, :class => 'form-control bg-focus', :style=>"width:200px;" %>
            </div>

            <div class="field">
              <%= f.label :amount %><br>
              <%= f.text_field :amount, :class => 'form-control bg-focus', :style=>"width:200px;" %>
            </div>

            <div class="field">
              <%= f.label :description %><br>
              <%= f.text_field :description, :class => 'form-control bg-focus', :style=>"width:200px;" %>
            </div>


            <div class="col-lg-8 col-lg-offset-4" id="submit">
              <button class="btn btn-success">Save</button> 
              <a class="btn btn-default" href="/expenses">Cancel</a>
            </div>
          </div>
        </div>
      </section>
    </div>
  </div>
<% end %>

<script type="text/javascript">
  $(document).ready(function(){
    // $("#expense_status").change(function(){
    $("#expense_status").on('change', function(){
      alert($(this).val());
    $.ajax({
      url: 'populate_other_list',
      type: "GET",
      data: {expense_status: $(this).val()},
      success: handleResponse
      // success: function(data){
      //   $("#customer_id").val(data);
      // }
    })

    // var state = $('select#expense_status :selected').val();
    // if(state == "") state="0";
    // jQuery.getJSON('/expenses/populate_other_list/', function(data){
    //   alert(data);
    //     $("#expense_status").val(data);
    //     alert(data.name);
    // })
    // return false;

  });
// });
</script>
